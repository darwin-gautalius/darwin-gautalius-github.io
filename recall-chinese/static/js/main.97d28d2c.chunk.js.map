{"version":3,"sources":["app/modules/character/Writer.tsx","firebase/index.tsx","app/auth/useCurrentUser.ts","app/Storage.tsx","app/hooks.ts","app/QuizRecord.tsx","app/helpers/math.ts","app/pages/StatisticsPage/calculateStatistics.ts","app/modules/hsk/hsk.ts","app/modules/userVocab/data.ts","app/pages/QuizPage/QuizPage.tsx","app/pages/QuizPage/useRandomVocab.ts","app/pages/AboutPage/AboutPage.tsx","app/pages/DataPage.tsx","app/pages/SignInPage.tsx","app/auth/useAuthState.ts","app/auth/useSignInWithGoogle.ts","app/modules/radical/radicals.ts","app/modules/character/dictionary.ts","app/components/Info.tsx","app/components/RadicalCard.tsx","app/pages/RadicalsPage.tsx","app/pages/WordsBankPage.tsx","app/helpers/formatter.ts","app/pages/StatisticsPage/CharacterDetailSummary.tsx","app/pages/StatisticsPage/CharacterSummaryTable.tsx","app/pages/StatisticsPage/StatisticsPage.tsx","app/App.tsx","app/AppProvider.tsx","serviceWorker.ts","index.tsx"],"names":["Writer","svgRef","createRef","hanziWriter","this","current","Error","props","character","showOutline","size","quiz","HanziWriter","create","width","height","padding","showCharacter","drawingWidth","beginQuiz","syncOutline","hideOutline","onComplete","summary","onCorrectStroke","strokeData","onMistake","highlightOnComplete","leniency","showHintAfterMisses","className","ref","Component","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","createContextWithHook","FirebaseContext","useFirebase","PureComponent","useCurrentUser","currentUser","auth","StorageContext","useStorageContext","LOCAL_STORAGE_AVAILBLE","localStorage","LocalStorageProvider","storageKey","children","useState","data","getItem","JSON","parse","get","setData","setAndSaveData","newData","setItem","stringify","save","Provider","value","key","removeItem","clear","useStorage","defaultValue","storage","useRecorder","initialValue","records","setRecords","saveRecord","newRecords","timestamp","Date","getTime","reset","useQuizRecords","useQuizRecorder","startTime","setStartTime","resetRecord","isPeeking","useTimer","peeks","startPeeking","endPeeking","clearPeeks","mistakes","recordMistake","clearMistakes","correctStrokes","recordCorrectStroke","clearCorrectStrokes","setStorage","record","useStoredRecorder","recordQuiz","isComplete","setIsComplete","listener","strokeNum","peek","roundDecimal","x","decimals","modifier","pow","power","Math","round","sumBy","sum","map","select","items","reduce","result","lastItem","array","length","randomItem","floor","random","calculateStatisticSummary","statisticsPerQuiz","recordsGroupedPerCharacter","statistics","push","timeStarted","min","Infinity","accuracyFactors","accuracy","timeTaken","mistakeCount","peekCount","peekTime","calculateStatisticPerRecord","groupRecordsByCharacter","characterSummaries","Object","entries","statistic","calculateStatisticPerCharacter","quizCount","characterCount","familiarityDistribution","calculateFamiliarityDistribution","alien","forgotten","familiar","remember","forEach","sumMistakeCount","sumPeekCount","sumPeekTime","sumTimeTaken","sumAccuracy","perfectQuizCount","filter","quizStatistic","mistakesAveragePerQuiz","peekCountAveragePerQuiz","peekTimeAveragePerQuiz","timeTakenAveragePerQuiz","HSK_VOCABS_BY_LEVEL","USER_HSK","vocabsPerLevel","level","vocab","hanzi","userHSK","index","USER_DEFINED_VOCABS","userVocabs","USER_VOCABS","flat","QuizPage","setVocab","nextVocab","split","find","useRandomVocab","randomize","setCurrent","pinyin","translations","slice","padEnd","char","classnames","join","disabled","onMouseDown","onMouseLeave","onMouseUp","icon","EyeFilled","EyeInvisibleFilled","type","onClick","newCurrent","AboutPage","shape","href","GithubFilled","HomeFilled","LinkedinFilled","InstagramFilled","TwitterOutlined","DataPage","firebase","isPersisted","setIsPersisted","useEffect","firestore","collection","doc","uid","then","docSnapshot","exists","undefined","LoadingOutlined","set","displayName","photoURL","src","alt","SignInPage","isLoggedIn","state","setState","getRedirectResult","console","info","catch","error","useAuthState","signIn","useCallback","a","setPersistence","Auth","Persistence","SESSION","provider","GoogleAuthProvider","signInWithRedirect","useSignInWithGoogle","radicals","dictionary","Info","title","RadicalCard","radical","mainVariant","variants","otherVariants","detail","id","strokes","variant","definition","RadicalsPage","WordsBankPage","TabPane","tab","vocabs","toString","checkedList","VocabList","dataSource","pagination","pageSize","position","renderItem","Item","includes","CheckOutlined","renderPercent","DETAIL_COLUMN","dataIndex","render","moment","locale","format","align","CharacterDetailSummary","word","columns","SUMMARY_COLUMN","defaultSortOrder","sorter","b","sortDirections","text","color","confirm","content","maskClosable","okCancel","ExpandOutlined","CharacterSummariesTable","hideOnSinglePage","StatisticsPage","Header","Content","App","location","useLocation","theme","mode","selectedKeys","pathname","to","path","component","AppProvider","basename","process","isLocalhost","Boolean","window","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","log","onUpdate","onSuccess","ReactDOM","StrictMode","document","getElementById","URL","origin","addEventListener","fetch","headers","response","contentType","status","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.97d28d2c.chunk.js","sourcesContent":["import React, { Component, createRef } from 'react';\nimport HanziWriter, { SummaryData, StrokeData } from 'hanzi-writer';\n\ninterface WriterProps {\n  size: number;\n  character: string;\n  showOutline?: boolean;\n  className?: string;\n  quiz?: boolean;\n  onComplete?: (summary: SummaryData) => void;\n  onCorrectStroke?: (strokeData: StrokeData) => void;\n  onMistake?: (strokeData: StrokeData) => void;\n}\n\n// lazy to think about avoiding stale closure problem\nexport class Writer extends Component<WriterProps> {\n  svgRef = createRef<SVGSVGElement>();\n  hanziWriter: HanziWriter | null = null;\n\n  componentDidMount() {\n    if (!this.svgRef.current) {\n      throw new Error('cannot find SVG ref');\n    }\n    const { character, showOutline, size, quiz } = this.props;\n    this.hanziWriter = HanziWriter.create(this.svgRef.current, character, {\n      width: size,\n      height: size,\n      padding: size / 10,\n      showOutline,\n      showCharacter: !quiz,\n      drawingWidth: 32\n    });\n    if (quiz) {\n      this.beginQuiz();\n    }\n  }\n\n  componentDidUpdate() {\n    this.syncOutline();\n  }\n\n  private syncOutline() {\n    if (!this.hanziWriter) {\n      throw new Error('Cannot find instance of HanziWriter');\n    }\n    const { showOutline } = this.props;\n    if (showOutline) {\n      this.hanziWriter.showOutline();\n    } else {\n      this.hanziWriter.hideOutline();\n    }\n\n  }\n\n  private beginQuiz() {\n    if (!this.hanziWriter) {\n      throw new Error('Cannot find instance of HanziWriter');\n    }\n    this.hanziWriter.quiz({\n      onComplete: (summary) => {\n        if (this.props.onComplete) {\n          this.props.onComplete(summary);\n        }\n      },\n      onCorrectStroke: (strokeData) => {\n        if (this.props.onCorrectStroke) {\n          this.props.onCorrectStroke(strokeData);\n        }\n      },\n      onMistake: (strokeData) => {\n        if (this.props.onMistake) {\n          this.props.onMistake(strokeData);\n        }\n      },\n\n      highlightOnComplete: true,\n      leniency: 1,\n      showHintAfterMisses: true\n    });\n  }\n\n  render() {\n    const { size, className } = this.props;\n    return <svg ref={this.svgRef} width={size} height={size} className={className} />;\n  }\n}\n","import * as firebase from 'firebase';\nimport React, { PureComponent } from 'react';\nimport { createContextWithHook } from 'react-maid';\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyAzKPKilnWb3uFM7yAeLGR5EbVGjH_teO0\",\n  authDomain: \"recall-chinese-characters.firebaseapp.com\",\n  databaseURL: \"https://recall-chinese-characters.firebaseio.com\",\n  projectId: \"recall-chinese-characters\",\n  storageBucket: \"recall-chinese-characters.appspot.com\",\n  messagingSenderId: \"15061851583\",\n  appId: \"1:15061851583:web:622f87b9fc4090281a950a\",\n  measurementId: \"G-QCJF7BD5ZZ\"\n};\n\nexport const [FirebaseContext, useFirebase] = createContextWithHook<typeof firebase>('Firebase');\n\nexport default class FirebaseProvider extends PureComponent<{}> {\n  constructor(props: {}) {\n    super(props);\n\n    firebase.initializeApp(firebaseConfig);\n  }\n\n  render() {\n    return (\n      <FirebaseContext.Provider value={firebase}>\n        {this.props.children}\n      </FirebaseContext.Provider>\n    );\n  }\n}","import { useFirebase } from '../../firebase';\n\nexport function useCurrentUser() {\n  const currentUser = useFirebase().auth().currentUser;\n  if (!currentUser) {\n    throw new Error('user is not logged in');\n  }\n  return currentUser;\n}","import { createContextWithHook } from 'react-maid';\nimport React, { FC, useState } from 'react';\nimport { useCurrentUser } from './auth/useCurrentUser';\nimport { useFirebase } from '../firebase';\n\ninterface Storage {\n  data: any;\n  clear: () => void;\n  setItem: (key: string, value: any) => void;\n  getItem: (key: string) => any;\n  removeItem: (key: string) => any;\n}\n\nexport const [StorageContext, useStorageContext] = createContextWithHook<Storage>('StorageContext');\n\ninterface LocalStorageProviderProps {\n  storageKey?: string;\n}\n\nconst LOCAL_STORAGE_AVAILBLE = typeof localStorage !== 'undefined';\nfunction save(storageKey: string, data: any) {\n  if (LOCAL_STORAGE_AVAILBLE) {\n    localStorage.setItem(storageKey, JSON.stringify(data));\n  }\n}\nfunction get(storageKey: string) {\n  if (LOCAL_STORAGE_AVAILBLE) {\n    const data = localStorage.getItem(storageKey);\n    if (data) {\n      return JSON.parse(data);\n    }\n  }\n  return {};\n}\n\nexport const FirebaseStorageProvider: FC = ({ children }) => {\n  const firebase = useFirebase();\n  const currentUser = useCurrentUser();\n  const [data, setData] = useState<Dictionary<any>>(() => {\n    return firebase.firestore().collection('users').doc(currentUser.uid).get();\n  });\n\n  const setAndSaveData = (newData: any) => {\n    setData(newData);\n    firebase.firestore().collection('users').doc(currentUser.uid).set(newData);\n  };\n\n  const setItem = (key: string, value: any) => {\n    setAndSaveData({ ...data, [key]: value });\n  };\n\n  const getItem = (key: string) => {\n    return data[key];\n  };\n\n  const removeItem = (key: string) => {\n    const newData = { ...data };\n    delete newData[key];\n    setAndSaveData(newData);\n  };\n\n  const clear = () => {\n    setAndSaveData({});\n  };\n\n  return (\n    <StorageContext.Provider value={{ data, setItem, getItem, removeItem, clear }}>\n      {children}\n    </StorageContext.Provider>\n  );\n}\n\nexport const LocalStorageProvider: FC<LocalStorageProviderProps> = ({ storageKey = 'storage', children }) => {\n  const [data, setData] = useState<Dictionary<any>>(() => {\n    return get(storageKey);\n  });\n\n  const setAndSaveData = (newData: any) => {\n    setData(newData);\n    save(storageKey, newData);\n  };\n\n  const setItem = (key: string, value: any) => {\n    setAndSaveData({ ...data, [key]: value });\n  };\n\n  const getItem = (key: string) => {\n    return data[key];\n  };\n\n  const removeItem = (key: string) => {\n    const newData = { ...data };\n    delete newData[key];\n    setAndSaveData(newData);\n  };\n\n  const clear = () => {\n    setAndSaveData({});\n  };\n\n  return (\n    <StorageContext.Provider value={{ data, setItem, getItem, removeItem, clear }}>\n      {children}\n    </StorageContext.Provider>\n  );\n};\n\nexport function useStorage<T>(key: string): [T | undefined, (value: T) => void];\nexport function useStorage<T>(key: string, defaultValue: T): [T, (value: T) => void];\nexport function useStorage<T>(key: string, defaultValue?: T): [T, (value: T) => void] {\n  const storage = useStorageContext();\n  const setItem = (value: T) => storage.setItem(key, value);\n  return [storage.getItem(key) || defaultValue, setItem];\n}\n","import { useState } from 'react';\nimport { useStorage } from './Storage';\n\nexport function useToggle(defaultValue = false): [boolean, VoidFunction] {\n  const [toggle, setToggle] = useState<boolean>(defaultValue);\n  return [toggle, () => setToggle((current) => !current)];\n}\n\nexport function useCounter(defaultValue = 0): [number, VoidFunction, VoidFunction] {\n  const [counter, setCounter] = useState<number>(defaultValue);\n  return [counter, () => setCounter((current) => ++current), () => setCounter(defaultValue)];\n}\n\nexport interface Record<T> {\n  timestamp: number;\n  data: T;\n}\n\nexport function useRecorder<T>(initialValue: Record<T>[] = []): [Record<T>[], (record: T) => Record<T>[], VoidFunction] {\n  const [records, setRecords] = useState<Record<T>[]>(initialValue);\n\n  const saveRecord = (data: T) => {\n    const record: Record<T> = {\n      timestamp: new Date().getTime(),\n      data,\n    }\n    const newRecords = [record, ...records];\n    setRecords(newRecords);\n\n    return newRecords;\n  };\n\n  const reset = () => setRecords([]);\n\n  return [records, saveRecord, reset];\n}\n\nexport function useTimer(): [boolean, Record<number>[], VoidFunction, VoidFunction, VoidFunction] {\n  const [startTime, setStartTime] = useState(0);\n  const [records, saveRecord, resetRecord] = useRecorder<number>();\n  const isPeeking = startTime !== 0;\n  const start = () => {\n    setStartTime(new Date().getTime());\n  };\n  const end = () => {\n    if (isPeeking) {\n      saveRecord(new Date().getTime() - startTime);\n      setStartTime(0);\n    }\n  };\n  const reset = () => {\n    resetRecord();\n    setStartTime(0);\n  };\n\n  return [isPeeking, records, start, end, reset];\n}\n\nexport function useStoredRecorder<T>(storageKey: string): [Record<T>[], (data: T) => void] {\n  const [storage, setStorage] = useStorage<Record<T>[]>(storageKey);\n  const [records, record] = useRecorder(storage);\n\n  const recordAndSave = (data: T) => {\n    const newRecords = record(data);\n    setStorage(newRecords);\n  };\n\n  return [records, recordAndSave];\n}\n","import { useRecorder, Record, useStoredRecorder, useTimer } from './hooks';\nimport { StrokeData, SummaryData } from 'hanzi-writer';\nimport { useState } from 'react';\nimport { useStorage } from './Storage';\n\nexport interface QuizData {\n  character: string;\n  peeks: Record<number>[];\n  mistakes: Record<number>[];\n  correctStrokes: Record<number>[];\n}\n\nexport type QuizRecords = Record<QuizData>[];\n\nconst QUIZ_STORAGE_KEY = 'QuizData';\n\nexport function useQuizRecords() {\n  return useStorage<QuizRecords>(QUIZ_STORAGE_KEY, []);\n}\n\nexport function useQuizRecorder() {\n  const [isPeeking, peeks, startPeeking, endPeeking, clearPeeks] = useTimer();\n  const [mistakes, recordMistake, clearMistakes] = useRecorder<number>();\n  const [correctStrokes, recordCorrectStroke, clearCorrectStrokes] = useRecorder<number>();\n  const [, recordQuiz] = useStoredRecorder<QuizData>(QUIZ_STORAGE_KEY);\n  const [isComplete, setIsComplete] = useState(false);\n\n  const onCorrectStroke = (summary: StrokeData) => {\n    recordCorrectStroke(summary.strokeNum);\n  };\n  const onMistake = (summary: StrokeData) => {\n    recordMistake(summary.strokeNum);\n  };\n  const onComplete = (summary: SummaryData) => {\n    setIsComplete(true);\n    recordQuiz({\n      character: summary.character,\n      mistakes,\n      correctStrokes,\n      peeks\n    });\n  };\n\n  const reset = () => {\n    setIsComplete(false);\n    clearPeeks();\n    clearMistakes();\n    clearCorrectStrokes();\n  };\n\n  return {\n    listener: { onComplete, onMistake, onCorrectStroke },\n    peek: { isPeeking, startPeeking, endPeeking },\n    reset,\n    isComplete\n  };\n}","export function roundDecimal(x: number, decimals: number) {\n  const modifier = pow(10, decimals);\n  return Math.round(x * modifier) / modifier;\n}\n\nexport function pow(x: number, power: number): number {\n  if (power === 0) {\n    return 1;\n  }\n  return x * pow(x, power - 1);\n}\n\nexport function select<T>(records: T[], key: keyof T) {\n  return records.map((record) => record[key]);\n}\n\nexport function sumBy<T>(records: T[], key: keyof T) {\n  return sum(select(records, key) as unknown as number[]);\n}\n\nexport function sum(items: number[]) {\n  return items.reduce((result, record) => result + record, 0);\n}\n\nexport function avg(items: number[]) {\n  if (items.length === 0) {\n    return 0;\n  }\n  return sum(items) / items.length;\n}\n\nexport function lastItem<T>(array: T[]) {\n  return array[array.length - 1];\n}\n\nexport function randomItem<T>(items: T[]) {\n  const randomIndex = Math.floor(Math.random() * items.length);\n  return items[randomIndex];\n}\n","import { Record } from '../../hooks';\nimport { QuizRecords, QuizData } from '../../QuizRecord';\nimport { StatisticPerQuiz, StatisticPerCharacter, CharacterSummary } from './interfaces';\nimport { lastItem, sumBy } from '../../helpers/math';\n\nexport function calculateStatisticSummary(records: QuizRecords) {\n  const recordsGroupedPerCharacter = groupRecordsByCharacter(records);\n  const characterSummaries = calculateCharacterSummaries(recordsGroupedPerCharacter);\n\n  return {\n    quizCount: records.length,\n    characterCount: characterSummaries.length,\n    characterSummaries,\n    familiarityDistribution: calculateFamiliarityDistribution(characterSummaries)\n  }\n}\n\nfunction calculateFamiliarityDistribution(characterSummaries: CharacterSummary[]) {\n  let alien = 0;\n  let forgotten = 0;\n  let familiar = 0;\n  let remember = 0;\n\n  characterSummaries.forEach((summary) => {\n    const accuracy = summary.statistic.accuracy;\n    if (accuracy < 0.5) {\n      alien++;\n    } else if (accuracy < 0.75) {\n      forgotten++;\n    } else if (accuracy < 0.90) {\n      familiar++;\n    } else {\n      remember++;\n    }\n  });\n\n  return { alien, forgotten, familiar, remember };\n}\n\nfunction groupRecordsByCharacter(records: QuizRecords) {\n  return records.reduce<Dictionary<StatisticPerQuiz[]>>((statistics, record) => {\n    statistics[record.data.character] = statistics[record.data.character] || [];\n    statistics[record.data.character].push(\n      calculateStatisticPerRecord(record)\n    );\n    return statistics;\n  }, {});\n}\n\nfunction calculateCharacterSummaries(statisticsPerQuiz: Dictionary<StatisticPerQuiz[]>): CharacterSummary[] {\n  return Object.entries(statisticsPerQuiz)\n    .map(([character, statisticsPerQuiz]) => {\n      return {\n        character,\n        statistic: calculateStatisticPerCharacter(statisticsPerQuiz),\n        statisticsPerQuiz\n      }\n    });\n}\n\nfunction calculateStatisticPerCharacter(statisticsPerQuiz: StatisticPerQuiz[]): StatisticPerCharacter {\n  const sumMistakeCount = sumBy(statisticsPerQuiz, 'mistakeCount');\n  const sumPeekCount = sumBy(statisticsPerQuiz, 'peekCount');\n  const sumPeekTime = sumBy(statisticsPerQuiz, 'peekTime');\n  const sumTimeTaken = sumBy(statisticsPerQuiz, 'timeTaken');\n  const sumAccuracy = sumBy(statisticsPerQuiz, 'accuracy');\n\n  const perfectQuizCount = statisticsPerQuiz\n    .filter((quizStatistic) => quizStatistic.mistakeCount === 0 && quizStatistic.peekCount === 0)\n    .length;\n  const quizCount: number = statisticsPerQuiz.length;\n\n  return {\n    quizCount,\n    mistakesAveragePerQuiz: sumMistakeCount / quizCount,\n    accuracy: sumAccuracy / quizCount,\n    peekCountAveragePerQuiz: sumPeekCount / quizCount,\n    peekTimeAveragePerQuiz: sumPeekTime / quizCount,\n    timeTakenAveragePerQuiz: sumTimeTaken / quizCount,\n    perfectQuizCount\n  };\n}\n\nfunction calculateStatisticPerRecord(record: Record<QuizData>) {\n  const timeStarted = Math.min(\n    lastItem(record.data.correctStrokes).timestamp,\n    lastItem(record.data.mistakes)?.timestamp || Infinity,\n    lastItem(record.data.peeks)?.timestamp || Infinity,\n  );\n\n  const accuracyFactors =\n    record.data.mistakes.length +\n    record.data.correctStrokes.length +\n    record.data.peeks.length * record.data.correctStrokes.length / 2;\n\n  return {\n    accuracy: record.data.correctStrokes.length / accuracyFactors,\n    timeTaken: record.timestamp - timeStarted,\n    mistakeCount: record.data.mistakes.length,\n    peekCount: record.data.peeks.length,\n    peekTime: sumBy(record.data.peeks, 'data')\n  };\n}\n","import jsonData from './hsk.json';\n\ninterface HSK {\n  level: number[];\n  vocab: Vocab;\n}\n\nexport const HSK_VOCABS_BY_LEVEL: Vocab[][] = jsonData;\nexport const HSK_DICTIONARY = HSK_VOCABS_BY_LEVEL\n  .reduce<Dictionary<HSK>>((result, vocabsPerLevel, level) => {\n    vocabsPerLevel.forEach((vocab) => {\n      result[vocab.hanzi] = result[vocab.hanzi] || { level: [], vocab };\n      result[vocab.hanzi].level.push(level);\n    });\n    return result;\n  }, {});\n","import userHSK from './user-hsk.json';\nimport userVocabs from './user-vocabs.json';\n\nimport { HSK_VOCABS_BY_LEVEL } from '../hsk';\n\nexport const USER_HSK = userHSK.reduce<Dictionary<number[]>>((result, [level, index]) => {\n  result[level] = result[level] || [];\n  result[level].push(index);\n  return result;\n},\n  {});\nexport const USER_DEFINED_VOCABS = userVocabs;\nexport const USER_VOCABS = [\n  userHSK.map(([level, index]) => HSK_VOCABS_BY_LEVEL[level][index]),\n  USER_DEFINED_VOCABS\n].flat();\n","import classnames from 'classnames';\nimport { Button } from 'antd';\nimport React, { useState } from 'react';\n\nimport { Writer } from '../../modules/character/Writer';\nimport Title from 'antd/lib/typography/Title';\nimport { useRandomVocab } from './useRandomVocab';\nimport { useQuizRecorder } from '../../QuizRecord';\nimport { EyeFilled, EyeInvisibleFilled } from '@ant-design/icons';\n\nexport const QuizPage = () => {\n  const [vocab, randomize] = useRandomVocab();\n  const [current, setCurrent] = useState(0);\n  const { listener, peek, reset, isComplete } = useQuizRecorder();\n  const next = () => {\n    reset();\n    const newCurrent = current + 1;\n    if (newCurrent === vocab.hanzi.length) {\n      setCurrent(0);\n      randomize();\n    } else {\n      setCurrent(newCurrent);\n    }\n  };\n  return (\n    <>\n      <div className=\"m-md\">\n        <Title level={2}>Word:</Title>\n        <b>{vocab.pinyin}</b>: {vocab.translations}\n      </div>\n      <div className=\"m-md\">\n        <div className=\"d-flex\">\n          <Title level={2}>Write It Down:</Title>\n        </div>\n        <div className=\"d-flex f-center\">\n          {vocab.hanzi\n            .slice(0, current + (isComplete ? 1 : 0))\n            .padEnd(vocab.hanzi.length, '？')\n            .split('')\n            .map((char, index) => <div key={index} className={classnames(\"hanzi-md m-sm b-1\", { 'b-primary': current === index })}>{char}</div>)\n          }\n        </div>\n        <div className=\"d-flex f-center my-xss\">\n          <Writer\n            key={[current, vocab.hanzi[current]].join()}\n            className=\"bg-light b-1\"\n            showOutline={peek.isPeeking}\n            character={vocab.hanzi[current]}\n            size={256}\n            quiz\n            {...listener}\n          />\n        </div>\n      </div>\n      <div className=\"d-flex mx-md my-lg\">\n        <Button\n          className=\"mr-sm\"\n          disabled={isComplete}\n          onMouseDown={peek.startPeeking}\n          onMouseLeave={peek.endPeeking}\n          onMouseUp={peek.endPeeking}\n          icon={peek.isPeeking ? <EyeFilled /> : <EyeInvisibleFilled />}\n        />\n        <Button type=\"primary\" className=\"f-grow\" onClick={next} disabled={!isComplete}>\n          Next Character\n        </Button>\n      </div>\n    </>\n  );\n};\n","import { useState } from 'react';\n\nimport { useQuizRecords } from '../../QuizRecord';\nimport { calculateStatisticSummary } from '../StatisticsPage/calculateStatistics';\nimport { randomItem, avg } from '../../helpers/math';\nimport { USER_VOCABS } from '../../modules/userVocab/data';\n\nexport function useRandomVocab(): [Vocab, () => void] {\n  const [vocab, setVocab] = useState(() => randomItem(USER_VOCABS));\n  const [records] = useQuizRecords();\n\n  const randomize = () => {\n    let nextVocab: Vocab;\n    const summary = calculateStatisticSummary(records);\n    do {\n      nextVocab = randomItem(USER_VOCABS);\n      const accuracy = avg(\n        nextVocab.hanzi.split('').map((character) =>\n          summary.characterSummaries.find((summary) => summary.character === character)?.statistic.accuracy || 0\n        )\n      );\n      // make high accuracy text appear less. add 0.1 to make 100% accuracy still able to appear\n      if (Math.random() + 0.1 < accuracy) {\n        continue;\n      }\n    } while (nextVocab === vocab);\n    setVocab(nextVocab);\n  }\n  return [vocab, randomize];\n}","import { HomeFilled, GithubFilled, LinkedinFilled, InstagramFilled, TwitterOutlined } from '@ant-design/icons';\nimport { Card, Button } from 'antd';\nimport Paragraph from 'antd/lib/typography/Paragraph';\nimport Title from 'antd/lib/typography/Title';\nimport React from 'react';\n\nexport const AboutPage = () => {\n  return (\n    <>\n      <Card className=\"m-md\">\n        <Title>Recall Chinese</Title>\n        <Title level={2}>About Recall Chinese</Title>\n        <Paragraph>\n          Recall Chinese is an app created to help the creator learn Chinese, and hopefully will help others too.\n          Currently this app only randomize word that the creator learned already.\n        </Paragraph>\n        <Paragraph>\n          This app integrates various amazing open-source projects:\n          <ul>\n            <li>\n              <div className=\"mt-sm mb-xss\">Pinyin &amp; Translations:</div>\n              <Button type=\"default\" shape=\"circle\" className=\"mr-sm\" href=\"https://github.com/skishore/makemeahanzi\" icon={<GithubFilled />} />\n            </li>\n            <li>\n              <div className=\"mt-sm mb-xss\">Graphic Data:</div>\n              <Button type=\"default\" shape=\"circle\" className=\"mr-sm\" href=\"https://github.com/chanind/hanzi-writer-data\" icon={<GithubFilled />} />\n            </li>\n            <li>\n              <div className=\"mt-sm mb-xss\">Writer:</div>\n              <Button type=\"default\" shape=\"circle\" className=\"mr-sm\" href=\"https://github.com/chanind/hanzi-writer\" icon={<GithubFilled />} />\n              <Button type=\"default\" shape=\"circle\" className=\"mr-sm\" href=\"https://hanziwriter.org/\" icon={<HomeFilled />} />\n            </li>\n          </ul>\n        </Paragraph>\n        <Title level={3}>Features</Title>\n        <Paragraph>\n          <ul>\n            <li>\n              <b>Randomize Words: </b>\n              currently randomized based on words/phrases that the creator already know, inserted manually.\n              The lower the accuracy, the more chance randomizer will pick the word again.\n            </li>\n            <li>\n              <b>Peek Word: </b>\n              Take a peek if of the character if you forget how it looks like.\n            </li>\n            <li>\n              <b>List of KangXi Radicals: </b>\n              to help remember common pattern of the words and also show which words you know use the radicals.\n            </li>\n            <li>\n              <b>Words Bank: </b>\n              List of words/phrases inserted manually by the creator.\n            </li>\n            <li>\n              <b>Statistics: </b>\n              Show which word you need to show the outline, number mistakes compared to total strokes, etc.\n            </li>\n          </ul>\n        </Paragraph>\n        <Title level={3}>Possible Future Implementation</Title>\n        <Paragraph>\n          I still have some more ideas to build, but I'm not sure if I have enough motivation to implement more.\n          Because right now it is already fit for my needs. But I may change my mind anytime.\n          <ul>\n            <li>\n              <b>Use HSK 1-6 word, selectable by level</b>\n              No more mine (Currently HSK 2-3). Pick your level.\n            </li>\n            <li>\n              <b>Implement Server Side: </b>\n              Prevent statistic loss due to out of memory. Currently saved in a limited space in browser.\n            </li>\n            <li>\n              <b>Pinyin tone change for multi-character words: </b>\n              Not sure if there is someone who has implemented it.\n            </li>\n          </ul>\n        </Paragraph>\n      </Card>\n      <Card className=\"m-md\">\n        <Title level={2}>About The Creator</Title>\n        <Paragraph>\n          Hi there! I'm Darwin, an Indonesian based front-end developer.\n          Due to COVID-19, I have nothing to do at home outside work, sleep, and sometimes play mobile games.\n          (Thankfully I'm lucky enough I don't lose job though.)\n          So, I set a lot of goals on these times at home. One of them is to learn Chinese language.\n          By the way, I'm Chinese by blood and I also have Chinese name given by my parents: 李金永.\n          But I can't speak Chinese (in any dialect) at all. :p\n          My parents used to speak Hakka dialect between them, so at least I can hear some common words. :D\n        </Paragraph>\n        <Paragraph>\n          On my journey of learning Chinese language, I have difficulty trying to read a lot of characters that I actually learned before.\n          So I created this app to help myself recall Chinese characters I learned.\n          Hopefully this app will help me a lot in recalling Chinese characters I learned.\n          If you are interested, I hope this app will help you too!\n        </Paragraph>\n        <Paragraph>\n          Get in touch with me:\n          <div className=\"my-sm\">\n            <Button type=\"default\" shape=\"circle\" className=\"mr-sm\" href=\"https://www.linkedin.com/in/darwingautalius/\" icon={<LinkedinFilled />} />\n            <Button type=\"default\" shape=\"circle\" className=\"mr-sm\" href=\"https://instagram.com/darwin.gautalius\" icon={<InstagramFilled />} />\n            <Button type=\"default\" shape=\"circle\" className=\"mr-sm\" href=\"https://twitter.com/darwingautalius\" icon={<TwitterOutlined />} />\n          </div>\n        </Paragraph>\n      </Card>\n    </>\n  );\n};\n","import { LoadingOutlined } from '@ant-design/icons';\nimport { Button } from 'antd';\nimport React, { useEffect, useState } from 'react';\n\nimport { useStorageContext } from '../Storage';\nimport { useFirebase } from '../../firebase';\nimport { useCurrentUser } from '../auth/useCurrentUser';\n\nexport const DataPage = () => {\n  const currentUser = useCurrentUser();\n  const firebase = useFirebase();\n  const storage = useStorageContext();\n\n  const [isPersisted, setIsPersisted] = useState<boolean>();\n\n  const checkIsPersisted = () => {\n    firebase.firestore().collection('users').doc(currentUser.uid).get().then((docSnapshot) => {\n      setIsPersisted(docSnapshot.exists);\n    });\n  }\n  function persistToServer() {\n    firebase.firestore().collection('users').doc(currentUser.uid).set(storage.data);\n  }\n\n  useEffect(() => {\n    checkIsPersisted();\n  });\n\n  if (isPersisted === undefined) {\n    return <LoadingOutlined />;\n  }\n\n  if (!isPersisted) {\n    return (\n      <>\n        Your Data has been synced to your account: {currentUser.displayName}\n        {currentUser.photoURL && <img src={currentUser.photoURL} alt={currentUser.displayName ? currentUser.displayName : undefined} />}\n      </>\n    );\n  }\n\n  return <Button onClick={persistToServer}>Persist Data to your account: {currentUser.displayName}</Button>;\n};\n","import { LoadingOutlined } from '@ant-design/icons';\nimport { Button } from 'antd';\nimport React from 'react';\n\nimport { useSignInWithGoogle } from '../auth/useSignInWithGoogle';\nimport { useAuthState } from '../auth/useAuthState';\nimport { DataPage } from './DataPage';\n\nexport const SignInPage = () => {\n  const isLoggedIn = useAuthState();\n  const signIn = useSignInWithGoogle();\n\n  if (isLoggedIn === undefined) {\n    return <LoadingOutlined />;\n  }\n\n  if (isLoggedIn) {\n    return <DataPage />;\n  }\n\n  return (\n    <div>\n      <Button onClick={signIn}>Sign In with Google</Button>\n    </div>\n  );\n};\n","import { useState, useEffect } from 'react';\nimport { useFirebase } from '../../firebase';\n\nexport function useAuthState() {\n  const [state, setState] = useState<undefined | boolean>();\n\n  const firebase = useFirebase();\n\n  useEffect(() => {\n    firebase.auth().getRedirectResult()\n      .then((result) => {\n        console.info(result);\n        setState(true);\n      })\n      .catch((error) => {\n        console.error(error);\n        setState(false);\n      });\n  });\n\n  return state;\n}","import { useCallback } from 'react';\n\nimport { useFirebase } from '../../firebase';\n\nexport function useSignInWithGoogle() {\n  const firebase = useFirebase();\n\n  return useCallback(async () => {\n    await firebase.auth().setPersistence(firebase.auth.Auth.Persistence.SESSION);\n\n    const provider = new firebase.auth.GoogleAuthProvider();\n    await firebase.auth().signInWithRedirect(provider);\n  }, [firebase]);\n}\n","import jsonData from './radicals.json';\n\ninterface Variant {\n  character: string;\n  strokes: number;\n}\n\nexport interface Radical {\n  id: number;\n  variants: Variant[];\n};\n\nexport const radicals: Radical[] = jsonData;\n","import jsonData from './dictionary.json';\nexport interface DictionaryData {\n  definition: string;\n  pinyin: string[],\n  decomposition: string;\n  radical: string;\n};\n\nexport const dictionary: Dictionary<DictionaryData> = jsonData;","import classnames from 'classnames';\nimport React, { FC } from 'react';\n\ninterface InfoProps {\n  title: string;\n  className?: string;\n}\n\nexport const Info: FC<InfoProps> = ({ title, className, children }) => {\n  return (\n    <div className={classnames(\"my-xs\", className)}>\n      <div className=\"text-light\">{title}:</div>\n      {children}\n    </div>\n  );\n}\n","import React, { FC } from 'react';\nimport { Card } from 'antd';\n\nimport { dictionary } from '../modules/character/dictionary';\nimport { Radical } from '../modules/radical/radicals';\nimport { Info } from './Info';\n\ninterface RadicalCardProps {\n  radical: Radical;\n  className?: string;\n}\n\nexport const RadicalCard: FC<RadicalCardProps> = ({ className, radical }) => {\n  const mainVariant = radical.variants[0];\n  const otherVariants = radical.variants.slice(1);\n  const detail = dictionary[mainVariant.character];\n  return (\n    <Card className={className} title={\n      <div className=\"d-flex\">\n        <div className=\"text-light\">#{radical.id}</div>\n      </div>\n    }>\n      <div className=\"d-flex f-stretch\">\n        <div className=\"hanzi-lg mr-md mb-md\">\n          {mainVariant.character}\n        </div>\n        <div className=\"f-grow\">\n          <div className=\"d-flex\">\n            <Info title=\"Pīnyīn\" className=\"f-grow\">\n              {detail.pinyin.join('; ')}\n            </Info>\n            <Info title=\"Strokes\" className=\"f-grow\">\n              {mainVariant.strokes}\n            </Info>\n          </div>\n          {!!otherVariants.length && (\n            <Info title=\"Variants\">\n              <div className=\"d-flex\">\n                {otherVariants.map((variant) =>\n                  <span key={variant.character} className=\"hanzi-xs\">\n                    {variant.character}\n                  </span>\n                )}\n              </div>\n            </Info>\n          )}\n        </div>\n      </div>\n      <Info title=\"Definition\">\n        {detail.definition}\n      </Info>\n    </Card>\n  );\n};\n","import React from 'react';\nimport { radicals } from '../modules/radical/radicals';\nimport { RadicalCard } from '../components/RadicalCard';\n\nexport const RadicalsPage = () => {\n  return (\n    <>\n      {radicals.map((radical) => (\n        <RadicalCard key={radical.id} radical={radical} className=\"m-md\" />\n      ))}\n    </>\n  );\n}\n","import { Card, Tabs, List, Tooltip } from 'antd';\nimport React from 'react';\n\nimport { Info } from '../components/Info';\nimport { USER_DEFINED_VOCABS, USER_HSK } from '../modules/userVocab/data';\nimport { HSK_VOCABS_BY_LEVEL } from '../modules/hsk';\nimport { CheckOutlined } from '@ant-design/icons';\n\nexport const WordsBankPage = () => {\n  return (\n    <>\n      <Tabs size=\"small\">\n        <Tabs.TabPane tab=\"User\" key=\"0\">\n          <VocabList vocabs={USER_DEFINED_VOCABS} />\n        </Tabs.TabPane>\n        {HSK_VOCABS_BY_LEVEL.map((vocabs, level) =>\n          <Tabs.TabPane tab={`HSK ${level + 1}`} key={(level + 1).toString()}>\n            <VocabList vocabs={vocabs} checkedList={USER_HSK[level]} />\n          </Tabs.TabPane>\n        )}\n      </Tabs>\n    </>\n  );\n}\n\nconst VocabList = ({ vocabs, checkedList }: { vocabs: Vocab[], checkedList?: number[] }) => {\n  return (\n    <List\n      className=\"m-md\"\n      dataSource={vocabs.map((vocab, index) => ({ vocab, index }))}\n      pagination={{ pageSize: 50, position: 'both' }}\n      renderItem={({ vocab, index }) => {\n        return (\n          <List.Item key={vocab.hanzi}>\n\n            <Card className=\"w-100\">\n              <div className=\"d-flex\">\n                <Tooltip title={vocab.pinyin}>\n                  <div className=\"d-flex\">\n                    {vocab.hanzi.split('').map((character) =>\n                      <div className=\"hanzi-md\">{character}</div>\n                    )}\n                  </div>\n                </Tooltip>\n                <div className=\"f-grow\" />\n                {checkedList && (checkedList.includes(index) ? <CheckOutlined /> : `#${index + 1}`)}\n              </div>\n              <Info title=\"Definition\">\n                {vocab.translations.join('; ')}\n              </Info>\n            </Card>\n          </List.Item>\n        );\n      }}\n    />\n  );\n}\n","import moment from 'moment';\nimport { roundDecimal } from './math';\n\nexport function renderPercent(x: number) {\n  const percent = x * 100;\n  return roundDecimal(percent, 1) + '%';\n}\n\nexport function renderDate(x: number) {\n  return moment(x).locale('zh_cn').format('lll');\n}\n\nexport function renderDuration(x: number) {\n  return roundDecimal(x / 1000, 2) + 's';\n}\n","import React, { FC } from 'react';\nimport { StatisticPerQuiz, CharacterSummary } from './interfaces';\nimport { Info } from '../../components/Info';\nimport { Table } from 'antd';\nimport { ColumnType } from 'antd/lib/table';\nimport { renderDate, renderPercent, renderDuration } from '../../helpers/formatter';\nimport { dictionary } from '../../modules/character/dictionary';\nimport { USER_VOCABS } from '../../modules/userVocab/data';\n\nconst DETAIL_COLUMN: ColumnType<StatisticPerQuiz>[] = [\n  {\n    title: 'Date',\n    dataIndex: 'timestamp',\n    render: renderDate,\n  },\n  {\n    title: 'Mistakes',\n    dataIndex: 'mistakeCount',\n    align: 'right'\n  },\n  {\n    title: 'Peeks',\n    dataIndex: 'peekCount',\n    align: 'right'\n  },\n  {\n    title: 'Accuracy',\n    dataIndex: 'accuracy',\n    render: renderPercent\n  }\n];\n\ninterface Props {\n  summary: CharacterSummary;\n}\n\nexport const CharacterDetailSummary: FC<Props> = ({ summary }) => {\n  const vocabs = USER_VOCABS.filter((word) => word.hanzi.includes(summary.character));\n  return (\n    <>\n      <div className=\"d-flex mb-md\">\n        <div className=\"hanzi-md\">{summary.character}</div>\n      </div>\n      <div className=\"my-md\">\n        <Info title=\"Pīnyīn\">\n          {dictionary[summary.character].pinyin}\n        </Info>\n        <Info title=\"Definition\">\n          {dictionary[summary.character].definition}\n        </Info>\n        <Info title=\"Words in Bank\">\n          <div className=\"d-flex\">\n            {vocabs.map((vocab) => vocab.hanzi).join(', ')}\n          </div>\n        </Info>\n      </div>\n      <div className=\"my-md\">\n        <div className=\"d-flex my-xs f-wrap\">\n          <Info title=\"Quiz Taken\" className=\"f-grow f-33\">\n            {summary.statistic.quizCount}\n          </Info>\n          <Info title=\"Perfect Count\" className=\"f-grow f-33\">\n            {summary.statistic.perfectQuizCount}\n          </Info>\n          <Info title=\"Avg. Time Taken\" className=\"f-grow f-33\">\n            {renderDuration(summary.statistic.timeTakenAveragePerQuiz)}\n          </Info>\n          <Info title=\"Avg. Peek Count\" className=\"f-grow f-33\">\n            {summary.statistic.peekCountAveragePerQuiz}\n          </Info>\n          <Info title=\"Avg. Mistakes\" className=\"f-grow f-33\">\n            {summary.statistic.mistakesAveragePerQuiz}\n          </Info>\n          <Info title=\"Accuracy\" className=\"f-grow f-33\">\n            {renderPercent(summary.statistic.accuracy)}\n          </Info>\n        </div>\n      </div>\n      <Table size=\"small\" dataSource={summary.statisticsPerQuiz} columns={DETAIL_COLUMN} pagination={false} />\n    </>\n  );\n}\n","import { ExpandOutlined } from '@ant-design/icons';\nimport { Table, Modal, Button } from 'antd';\nimport { ColumnType } from 'antd/lib/table';\nimport React, { FC } from 'react';\n\nimport { CharacterDetailSummary } from './CharacterDetailSummary';\nimport { renderPercent } from '../../helpers/formatter';\nimport { CharacterSummary } from './interfaces';\n\nconst SUMMARY_COLUMN: ColumnType<CharacterSummary>[] = [\n  {\n    title: '字',\n    dataIndex: 'character',\n    align: 'center',\n  },\n  {\n    title: 'Quiz Taken',\n    dataIndex: ['statistic', 'quizCount'],\n    key: 'statistic.quizCount',\n    align: 'right'\n  },\n  {\n    title: 'Perfect Count',\n    dataIndex: ['statistic', 'perfectQuizCount'],\n    align: 'right'\n  },\n  {\n    title: 'Avg. Accuracy',\n    dataIndex: ['statistic', 'accuracy'],\n    key: 'statistic.accuracy',\n    align: 'right',\n    defaultSortOrder: 'ascend',\n    sorter: (a, b) => a.statistic.accuracy - b.statistic.accuracy,\n    sortDirections: ['ascend', 'descend'],\n    render: renderPercent,\n  },\n  {\n    title: '',\n    key: 'action',\n    render: (text, record) => {\n      const showDetail = () => {\n        return Modal.confirm({\n          type: undefined,\n          content: <CharacterDetailSummary summary={record} />,\n          maskClosable: true,\n          okCancel: false\n        });\n      };\n      return (\n        <Button type=\"link\" color=\"default\" onClick={showDetail} icon={<ExpandOutlined />} />\n      );\n    },\n  },\n];\n\ninterface Props {\n  characterSummaries: CharacterSummary[];\n}\n\nexport const CharacterSummariesTable: FC<Props> = ({ characterSummaries: statistics }) => {\n  return (\n    <Table size=\"small\" pagination={{ pageSize: 50, hideOnSinglePage: true }} dataSource={statistics} columns={SUMMARY_COLUMN} />\n  );\n};\n","import React from 'react';\n\nimport { Info } from '../../components/Info';\nimport { useQuizRecords } from '../../QuizRecord';\nimport { calculateStatisticSummary } from './calculateStatistics';\nimport { CharacterSummariesTable } from './CharacterSummaryTable';\n\nexport const StatisticsPage = () => {\n  const [quizRecords] = useQuizRecords();\n  const summary = calculateStatisticSummary(quizRecords);\n\n  return (\n    <>\n      <div className=\"m-md\">\n        <div className=\"d-flex m-xs\">\n          <Info title=\"Quiz Taken\" className=\"f-grow f-50\">\n            {summary.quizCount}\n          </Info>\n          <Info title=\"Characters Written\" className=\"f-grow f-50\">\n            {summary.characterCount}\n          </Info>\n        </div>\n        <div className=\"d-flex m-xs\">\n          <Info title=\"Alien\" className=\"f-grow f-25\">\n            {summary.familiarityDistribution.alien}\n          </Info>\n          <Info title=\"Forgotten\" className=\"f-grow f-25\">\n            {summary.familiarityDistribution.forgotten}\n          </Info>\n          <Info title=\"Familiar\" className=\"f-grow f-25\">\n            {summary.familiarityDistribution.familiar}\n          </Info>\n          <Info title=\"Remember\" className=\"f-grow f-25\">\n            {summary.familiarityDistribution.remember}\n          </Info>\n        </div>\n      </div>\n      <div className=\"my-md\">\n        <CharacterSummariesTable characterSummaries={summary.characterSummaries} />\n      </div>\n    </>\n  );\n}\n","import { Layout, Menu } from 'antd';\nimport React from 'react';\nimport { Route, Switch as RouteSwitch, useLocation } from 'react-router';\nimport { Link } from 'react-router-dom';\n\nimport { QuizPage } from './pages/QuizPage';\nimport { AboutPage } from './pages/AboutPage';\nimport { SignInPage } from './pages/SignInPage';\nimport { RadicalsPage } from './pages/RadicalsPage';\nimport { WordsBankPage } from './pages/WordsBankPage';\nimport { StatisticsPage } from './pages/StatisticsPage';\n\nconst { Header, Content } = Layout;\nexport const App = () => {\n  const location = useLocation();\n  return (\n    <Layout className=\"d-flex f-stretch f-column h-100vh\">\n      <Header className=\"sticky d-flex\">\n        <div className=\"f-grow\">\n          <Menu theme=\"dark\" mode=\"horizontal\" selectedKeys={[location.pathname]}>\n            <Menu.Item key=\"/\">\n              <Link to=\"/\">\n                Recall\n              </Link>\n            </Menu.Item>\n            <Menu.Item key=\"/statistics\">\n              <Link to=\"/statistics\">\n                Statistics\n              </Link>\n            </Menu.Item>\n            <Menu.Item key=\"/words\">\n              <Link to=\"/words\">\n                Words Bank\n              </Link>\n            </Menu.Item>\n            <Menu.Item key=\"/radicals\">\n              <Link to=\"/radicals\">\n                Radicals\n              </Link>\n            </Menu.Item>\n            <Menu.Item key=\"/about\">\n              <Link to=\"/about\">\n                About\n              </Link>\n            </Menu.Item>\n            <Menu.Item key=\"/data\">\n              <Link to=\"/data\">\n                Manage Data\n              </Link>\n            </Menu.Item>\n          </Menu>\n        </div>\n      </Header>\n      <Content className=\"f-grow\">\n        <Route>\n          <RouteSwitch>\n            <Route path=\"/data\" component={SignInPage} />\n            <Route path=\"/about\" component={AboutPage} />\n            <Route path=\"/statistics\" component={StatisticsPage} />\n            <Route path=\"/words\" component={WordsBankPage} />\n            <Route path=\"/radicals\" component={RadicalsPage} />\n            <Route path=\"/\" component={QuizPage} />\n          </RouteSwitch>\n        </Route>\n      </Content>\n    </Layout>\n  );\n};\n","import React, { FC } from 'react';\nimport { BrowserRouter } from 'react-router-dom';\nimport { LocalStorageProvider } from './Storage';\n\nexport const AppProvider: FC = ({ children }) => {\n  return (\n    <BrowserRouter basename={process.env.PUBLIC_URL}>\n      <LocalStorageProvider>\n        {children}\n      </LocalStorageProvider>\n    </BrowserRouter>\n  );\n};\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { App, AppProvider } from './app';\nimport * as serviceWorker from './serviceWorker';\n\nimport './styles/index.less';\n\nReactDOM.render(\n  <React.StrictMode>\n    <AppProvider>\n      <App />\n    </AppProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n"],"sourceRoot":""}